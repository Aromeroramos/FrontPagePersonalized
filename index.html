<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <title>frontpage</title>
      <meta charset="utf-8">
      <meta name="theme-color" content="#222">
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <link rel="stylesheet" href="css/style.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="js/bootstrap.min.js"></script>
      <script src="index.js"></script>
   </head>
   <body>
      <div class="container">
         <div class="jumbotron text-center">
            <a href="http://google.com">
            <img className="google" alt="Google logo" src="images/ggl.png"></img>
            </a>
            <form action="http://www.google.com/search">
               <input className="textbox" name="q" placeholder="Google search" autoComplete="on" maxLength="60"></input>
            </form>
         </div>
      </div>
      <div class="section" id="divheader">
      </div>
      <template id="bookmarksContainer">
         <div class="list social">
            <div class="list social header" id="divheader">
               <img src="" class="hicon" alt="" />
               <h1>Texto</h1>
            </div>
            <ul>
            </ul>
         </div>
      </template>
      <template id="bookmark">
         <li>
            <a href=""><img class="icon" src="" alt=""><span class="link-text"></span></a>
         </li>
      </template>
      <!-- This is a workarround to load a json ish file from a loca drive -->
      <script src="frankie.js" ></script>
      <script>
         //                              ...@ @..
         //                              ..(‘o‘)..
         //                              .º(___)º.
         //    This is an Anonymous Function. Search in youtube and learn more about it!!
         (function() {
             console.log("Anonymous function");
         })();

         //                              ...@ @..
         //                              ..(‘o‘)..
         //                              .º(___)º.
         //    This is an Anonymous Function using function arrow explression. Take a look the following youtuber, it one of the best for my taste.
         //    https://www.youtube.com/watch?v=6sQDTgOqh-I
         (() => {
             console.log("Anonymous function using 'Arrow '");
         })();

         //                              ...@ @..
         //                              ..(‘o‘)..
         //                              .º(___)º.
         //    Now lets develop the javascript we have as a javascript "ish" module.
         //    https://medium.freecodecamp.org/javascript-modules-a-beginner-s-guide-783f7d7a5fcc
         var myCoreIndexCode = (() => {

             // Sadly, as javascript is an interpreted languague, order matters. Is for that reason that this
             // function is in the beguinning of this block of code.
             function loadData() {
               return myArr;
             }

             // Let's create some variables using a compact style
             var bookmarkContainerBoxTemplate = document.querySelector("#bookmarksContainer"),
                 bookmarkItemTemplate = document.querySelector("#bookmark"),
                 injectElementRoot = document.querySelector("#divheader"),
                 bookmarksData = loadData();

             let cloneBookmarkContainerBoxTemplate = (() => {
                 return document.importNode(bookmarkContainerBoxTemplate.content, true);
             });

             let cloneBookmarkItemTemplate = (() => {
                 return document.importNode(bookmarkItemTemplate.content, true);
             });

             // This function creates bookmark container object, sets it's attributes and finally returnded
             // It requires a data object with the following two attributes: headername and heading.
             let renderBookmarkContainer = ((dataItem) => {
                 let bookmarkContainer = cloneBookmarkContainerBoxTemplate();
                 bookmarkContainer.querySelector("h1").textContent = dataItem.headername;
                 bookmarkContainer.querySelector("img").src = dataItem.headimg;
                 return bookmarkContainer;
             });

             // This function creates bookmark item object, sets it's attributes and finally returnded
             // It requires a data object with the following attributes: name, web and imagen
             let renderBookmarkItem = ((dataItem) => {
                 let bookmarkItem = cloneBookmarkItemTemplate();
                 bookmarkItem.querySelector("span").textContent = dataItem.name;
                 bookmarkItem.querySelector("a").href = dataItem.web;
                 bookmarkItem.querySelector("img").src = dataItem.imagen;
                 return bookmarkItem;
             });

             // Main function to render the bookmarks
             var renderContent = (() => {
                 // Iterate througth the bookmarks categories
                 for (let categoryIndex in bookmarksData) {
                     // Create a new bookmark container object.
                     let bookmarkContainer = renderBookmarkContainer(bookmarksData[categoryIndex]);
                     // Iterate the bookmarks of a category
                     for (let bookmarItemIndex in bookmarksData[categoryIndex].myObject) {
                         // Append the bookmark into a category container
                         bookmarkContainer.querySelector("ul")
                             .appendChild(renderBookmarkItem(bookmarksData[categoryIndex].myObject[bookmarItemIndex]));
                     }
                     // Append the bookmark container in the inject element root.
                     injectElementRoot.appendChild(bookmarkContainer);
                 }
             });

             // By doing that only the following functions will be "published" as "public" functions.
             // All the other internal functions will be "internal" and not accesible from the outside.
             return {
                 renderContent: renderContent
             }
         })();

         if ('content' in document.createElement('template')) {
             myCoreIndexCode.renderContent();
         } else {
             console.log("Templates not supported");
         }
      </script>
   </body>
</html>
